<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/estiloTienda.css">
    <meta charset="UTF-8">
    <title>Tienda</title>
    <style>

    </style>
    <script>
      function GetListaObjectosTienda(){
        // Create an XMLHttpRequest object
        const xhttp = new XMLHttpRequest();

        // Define a callback function
        xhttp.onload = function() {
          // Here you can use the Data
          console.log("Información recibida");
          var datos=  JSON.parse(this.responseText);
          console.log(datos);
          $('#resultados').empty();
          for (var i=0;i<datos.length;++i)
          {
            $("#resultados").append("<tr>"+
                    "<td>"+datos[i].nombreArticulo+"</td>"+
                    "<td>"+datos[i].articuloId+"</td>"+
                    "<td>"+datos[i].precioArticulo+"</td>"+
                    "<td>"+datos[i].tipoArticulo+"</td>"+
                    "<td>"+datos[i].recargaHambre+"</td>"+
                    "<td>"+datos[i].recargaSalud+"</td>"+
                    "<td>"+datos[i].recargaDiversion+"</td>"+
                    "<td>"+datos[i].recargaSueno+"</td>"+
                    "</tr>");
          }
        }

        // Send a request
        console.log("Se envía la petición");
        var url='http://localhost:8080/dsaApp/pougame/tienda/listaObjetos';
        //var url='http://147.83.7.203/dsaApp/pougame/tienda/listaObjetos';
        xhttp.open("GET",url, true);
        xhttp.send();
      }
    </script>

    <script>
      $(document).ready(GetListaObjectosTienda);
    </script>

  </head>
  <body>
    <header id="titulo">
      <h1>Tienda de productos para tu POU</h1>
    </header>
    <div id="buscador">
      <label for="btn">Clicka al boton para realizar la compra:</label><br>
      <input type="button" id="btn" value="Comprar"><br>
      <li><a href="home.html" type="button">Home</a></li>
    </div>
    <div id="tienda">
      <table id="tabla_general">
        <thead>
        <tr>
          <th>Nombre</th>
          <th>ID</th>
          <th>Precio (euros)</th>
          <th>Tipo</th>
          <th>Recarga hambre</th>
          <th>Recarga salud</th>
          <th>Recarga diversión</th>
          <th>Recarga sueño</th>
        </tr>
        </thead>
        <tbody id="resultados">
        </tbody>
      </table>
    </div>
  </body>
</html>